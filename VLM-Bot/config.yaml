# ============================================================================
# VLM-Bot Configuration
# ============================================================================

# Model Configuration
models:
  vlm:
    # LLaVA-1.5-7B: VLM performant avec quantization 4-bit pour 6GB VRAM
    name: "llava-hf/llava-1.5-7b-hf"
    model_type: "llava"  # Architecture LLaVA
    quantization:
      load_in_4bit: true
      bnb_4bit_compute_dtype: "float16"
      bnb_4bit_use_double_quant: true
      bnb_4bit_quant_type: "nf4"
    device_map: "auto"
    torch_dtype: "float16"
    max_memory: 
      0: "5GB"  # GPU 0 - RTX 4050 (6GB VRAM)
      "cpu": "12GB"
    trust_remote_code: false  # LLaVA ne nécessite pas trust_remote_code
    
    # Note: Testé et validé sur RTX 4050 6GB
    # VRAM utilisée: ~3.8 GB avec quantization 4-bit
  
  embedding:
    name: "sentence-transformers/all-MiniLM-L6-v2"
    device: "cpu"

# RAG Configuration
rag:
  dataset: "TimSchopf/medical_abstracts"
  chunk_size: 500
  chunk_overlap: 100
  top_k: 5
  index_path: "data/processed/faiss_index"
  
  keywords:
    # Cancers cutanés et lésions malignes
    skin_cancer:
      - "melanoma"
      - "malignant melanoma"
      - "skin cancer"
      - "basal cell carcinoma"
      - "squamous cell carcinoma"
      - "merkel cell carcinoma"
      - "kaposi sarcoma"
      - "cutaneous lymphoma"
      - "mycosis fungoides"
      
    # Lésions bénignes et précancéreuses
    benign_lesions:
      - "nevus"
      - "mole"
      - "dysplastic nevus"
      - "atypical nevus"
      - "seborrheic keratosis"
      - "actinic keratosis"
      - "solar keratosis"
      - "lentigo"
      - "dermatofibroma"
      - "hemangioma"
      - "lipoma"
      
    # Diagnostic et caractéristiques
    diagnostic:
      - "dermatology"
      - "dermoscopy"
      - "dermatoscopy"
      - "skin lesion"
      - "cutaneous lesion"
      - "pigmented lesion"
      - "ABCDE criteria"
      - "asymmetry"
      - "border irregularity"
      - "color variegation"
      - "diameter"
      - "evolution"
      - "ugly duckling sign"
      
    # Caractéristiques morphologiques
    morphology:
      - "pigmentation"
      - "hyperpigmentation"
      - "hypopigmentation"
      - "erythema"
      - "scaling"
      - "ulceration"
      - "crusting"
      - "nodule"
      - "papule"
      - "plaque"
      - "macule"
      - "patch"
      - "vesicle"
      - "bulla"
      
    # Pathologies inflammatoires et infectieuses
    inflammatory:
      - "eczema"
      - "dermatitis"
      - "psoriasis"
      - "rosacea"
      - "acne"
      - "folliculitis"
      - "cellulitis"
      - "impetigo"
      - "herpes"
      - "varicella"
      - "vitiligo"
      - "alopecia"
      
    # Termes généraux dermatologiques
    general:
      - "cutaneous"
      - "epidermal"
      - "dermal"
      - "subcutaneous"
      - "skin biopsy"
      - "histopathology"
      - "excision"
      - "cryotherapy"
      - "phototherapy"
      - "topical treatment"

# Gradio Configuration
gradio:
  port: 7860
  share: false
  server_name: "0.0.0.0"
  max_file_size: 10  # MB

# Generation Parameters
generation:
  max_new_tokens: 1024
  temperature: 0.5
  do_sample: true
  top_p: 0.9
